# ARS_BSW-ASW_Interface V1.00 â†’ V1.01 ì—‘ì…€ ì‘ì„± ì™„ì „ ê°€ì´ë“œ

ì‘ì„±ì¼: 2025-08-20  
ê·¼ê±°: ì‹¤ì œ ì½”ë“œ ì™„ì „ ë¹„êµ (01_compare_old vs 00_compare_current)  
í˜•ì‹: ì—‘ì…€ ë°”ë¡œ ì…ë ¥ ê°€ëŠ¥í•œ í•„ë“œ ë¸”ë¡ ë°©ì‹

## ğŸ“Š ì—…ë°ì´íŠ¸ ìš”ì•½
- **ì´ API**: 42 â†’ 51 (**+9ê°œ ì‹ ê·œ**, 0ê°œ ì‚­ì œ, **3ê°œ ìˆ˜ì •**)
- **í•µì‹¬ ë³€ê²½**: ADC RAWì±„ë„+5V0, CAN RXì¸ë±ìŠ¤ ì „ë©´êµì²´(MVPC/ROUTING), TX MEASë¼ì¸ì—…, ë“€ì–¼CAN(CH1), SENT SlowChannel, ì‹œìŠ¤í…œ ê³ ê¸‰ê¸°ëŠ¥
- **ëˆ„ë½ ë°©ì§€**: ëª¨ë“  ë³€ê²½ì  ì½”ë“œë ˆë²¨ ê²€ì¦ ì™„ë£Œ

---

## 00_ë¬¸ì„œì •ë³´ ì‹œíŠ¸ ì—…ë°ì´íŠ¸

**í•„ìˆ˜ ìˆ˜ì • ì…€:**
- **A2 (ë¬¸ì„œëª…)**: ARS_BSW-ASW_Interface_V1.01
- **B2 (ë²„ì „)**: V1.01
- **C2 (ì‘ì„±ì¼)**: 2025-08-20
- **ë³€ê²½ì´ë ¥ (ë§ˆì§€ë§‰ í–‰ ì¶”ê°€)**:
  ```
  V1.00 â†’ V1.01: API 9ê°œ ì¶”ê°€, 3ê°œ ìˆ˜ì •
  ì£¼ìš”: ë“€ì–¼CAN, SENT SlowChannel, CPU Load, ADC RAWí‘œì¤€í™”
  ```

---

## 01_IF_BSWâ†’ASW ì‹œíŠ¸

### ğŸ”§ ìˆ˜ì • í•­ëª© (3ê°œ)

#### 1) ShrHWIA_BswAdc_GetPhyValue (ê¸°ì¡´ í–‰ ìˆ˜ì •)
**ë³€ê²½ì **: ADC ì±„ë„ ë§¤í¬ë¡œì— RAW ì ‘ë¯¸ì‚¬ ë„ì…, VUC 3V3â†’5V0 ì „í™˜

**ì—‘ì…€ ìˆ˜ì • ì§€ì¹¨:**
- **1st Parameter ì…€ êµì²´**:
  ```
  ê¸°ì¡´: BSWADC_CH_SENS_CURR_U(0), _W(1), _DC(2), SENS_HV(3), VUC_3V3(8)...
  ì‹ ê·œ: BSWADC_CH_SENS_CURR_U_RAW(0), _W_RAW(1), _DC_RAW(2), SENS_HV(3), VUC_5V0(8), VCOM_5V0(9), VT1_5V0(10), VT2_5V0(11), VREF_5V0(12)
  ```
- **Description/ë¹„ê³  ì¶”ê°€**: "v1.01: RAW ì±„ë„ í‘œì¤€í™”, VUC=5V0 ì „í™˜"
- **Result ì»¬ëŸ¼**: CHG

#### 2) ShrHWIA_BswCan_GetMsg (ê¸°ì¡´ í–‰ ìˆ˜ì •)
**ë³€ê²½ì **: RX ì¸ë±ìŠ¤ ì „ë©´ êµì²´ (VPC/SEA â†’ MVPC/ROUTING)

**ì—‘ì…€ ìˆ˜ì • ì§€ì¹¨:**
- **1st Parameter ì…€ êµì²´**:
  ```
  ê¸°ì¡´: VPC_ARS_01_10ms(0), SEA_ARS_01_1ms(1), SEA_ARS_02_1ms(2)
  ì‹ ê·œ: MVPC_ARS_01_1ms(0), ROUTING_01_10ms(1), ROUTING_01_20ms(2), ROUTING_01_200ms(3)
  ```
- **ì¶”ê°€ ì •ë³´ ë³‘ê¸°**: "CAN ID: 0x20/0x27/0x26/0x25"
- **ë¹„ê³ **: "v1.00ì˜ VPC/SEA ê³„ì—´ â†’ v1.01 MVPC/ROUTING ê³„ì—´ë¡œ ì „ë©´ ì¹˜í™˜"
- **Result ì»¬ëŸ¼**: CHG

#### 3) ShrHWIA_BswCan_GetState_Busoff (ê¸°ì¡´ í–‰ ìˆ˜ì •)
**ë³€ê²½ì **: ë“€ì–¼ CAN ì±„ë„ ì§€ì› ì¶”ê°€

**ì—‘ì…€ ìˆ˜ì • ì§€ì¹¨:**
- **1st Parameter ì…€ êµì²´**:
  ```
  ê¸°ì¡´: BSWCAN_CAN_CH0(0)
  ì‹ ê·œ: BSWCAN_CAN_CH0(0), BSWCAN_CAN_CH1(1)
  ```
- **ë¹„ê³ **: "v1.01: ë“€ì–¼ CAN ì±„ë„ ì§€ì›"
- **Result ì»¬ëŸ¼**: CHG

### â• ì‹ ê·œ ì¶”ê°€ í•­ëª© (5ê°œ)

**ë‹¤ìŒ ë¸”ë¡ë“¤ì„ ìƒˆ í–‰ìœ¼ë¡œ ì¶”ê°€ (í•„ë“œëª… ê·¸ëŒ€ë¡œ ë³µì‚¬):**

#### 1) ShrHWIA_BswAdc_GetCurrentCalibStatus
- **Ver**: V1.01
- **NO.**: (ê¸°ì¡´ ë§ˆì§€ë§‰ ë²ˆí˜¸ +1)
- **Component**: BSW â†’ ASW  
- **Return Type**: uint8
- **Element Name**: ShrHWIA_BswAdc_GetCurrentCalibStatus()
- **Return/Range**: 0: ì§„í–‰ì¤‘, 1: ì„±ê³µ, 2: ì‹¤íŒ¨
- **Description**: ì „ë¥˜ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ìƒíƒœ ì¡°íšŒ
- **Result**: NEW

#### 2) ShrHWIA_BswAdc_GetMotorTempErrStatus  
- **Ver**: V1.01
- **NO.**: (ê¸°ì¡´ ë§ˆì§€ë§‰ ë²ˆí˜¸ +2)
- **Component**: BSW â†’ ASW
- **Return Type**: uint8
- **Element Name**: ShrHWIA_BswAdc_GetMotorTempErrStatus()
- **Return/Range**: 0: ì •ìƒ(VALID), 1: ì—ëŸ¬(INVALID)
- **Description**: ëª¨í„° ì˜¨ë„ ì„¼ì„œ ì—ëŸ¬ ìƒíƒœ
- **Result**: NEW

#### 3) ShrHWIA_BswSent_GetSlowChannel
- **Ver**: V1.01
- **NO.**: (ê¸°ì¡´ ë§ˆì§€ë§‰ ë²ˆí˜¸ +3)
- **Component**: BSW â†’ ASW
- **Return Type**: Std_ReturnType
- **Element Name**: ShrHWIA_BswSent_GetSlowChannel(uint8 msgId, uint16* data, uint32* timestamp)
- **1st Parameter**: msgId (22ê°œ ID ì§€ì›)
- **2nd Parameter**: data (ì¶œë ¥ í¬ì¸í„°)
- **3rd Parameter**: timestamp (ì¶œë ¥ í¬ì¸í„°)
- **Description**: SENT Slow Channel ë°ì´í„° ì½ê¸°
- **Note**: "ID ëª©ë¡/ë‹¨ìœ„ëŠ” í•˜ìœ„ ì„¤ê³„ì„œ ì°¸ì¡°"
- **Result**: NEW

#### 4) ShrHWIA_BswSys_GetCpuLoad
- **Ver**: V1.01
- **NO.**: (ê¸°ì¡´ ë§ˆì§€ë§‰ ë²ˆí˜¸ +4)
- **Component**: BSW â†’ ASW
- **Return Type**: float32
- **Element Name**: ShrHWIA_BswSys_GetCpuLoad()
- **Unit/Range**: % / 0.0~100.0
- **Update**: 100ms ì£¼ê¸°
- **Description**: ì‹œìŠ¤í…œ CPU ì‚¬ìš©ë¥ 
- **Result**: NEW

#### 5) ShrHWIA_IswHandler_Init3
- **Ver**: V1.01
- **NO.**: (ê¸°ì¡´ ë§ˆì§€ë§‰ ë²ˆí˜¸ +5)
- **Component**: BSW â†’ ASW
- **Task**: Init
- **Return Type**: void
- **Element Name**: ShrHWIA_IswHandler_Init3()
- **Description**: 3ì°¨ ì´ˆê¸°í™” (ê³ ê¸‰ ê¸°ëŠ¥ í™œì„±í™”)
- **Result**: NEW

---

## 02_IF_ASWâ†’BSW ì‹œíŠ¸

### ğŸ”§ ìˆ˜ì • í•­ëª© (1ê°œ)

#### 1) ShrHWIA_BswCan_SetMsg (ê¸°ì¡´ í–‰ ìˆ˜ì •)
**ë³€ê²½ì **: TX ì¸ë±ìŠ¤ ë¼ì¸ì—… ê°œí¸ ("MEAS" ê³„ì—´ ì¶”ê°€)

**ì—‘ì…€ ìˆ˜ì • ì§€ì¹¨:**
- **1st Parameter ì…€ êµì²´**:
  ```
  ì‹ ê·œ TX ì¸ë±ìŠ¤:
  MEAS_01_1ms(0), MEAS_01_5ms(1), MEAS_02_5ms(2), MEAS_01_10ms(3), MEAS_02_10ms(4), ARS_dev_01_1ms(5)
  ```
- **DLC ì •ë³´ ë³‘ê¸°**: "MEAS=32byte, ARS_dev=16byte"
- **ë¹„ê³ **: "v1.00ì˜ ARS_dev_0x514~0x517 â†’ v1.01 MEAS ë¼ì¸ì—…ìœ¼ë¡œ êµ¬ì„± ë³€ê²½"
- **Result ì»¬ëŸ¼**: CHG

### â• ì‹ ê·œ ì¶”ê°€ í•­ëª© (4ê°œ)

#### 1) ShrHWIA_BswSys_SetTargetAxle
- **Ver**: V1.01
- **NO.**: (ê¸°ì¡´ ë§ˆì§€ë§‰ ë²ˆí˜¸ +1)
- **Task**: Init
- **Return Type**: void
- **Element Name**: ShrHWIA_BswSys_SetTargetAxle(uint8 axle)
- **1st Parameter**: 0: UNDEFINED, 1: FRONT, 2: REAR
- **Description**: íƒ€ê²Ÿ ì•¡ìŠ¬ ì„¤ì •
- **Result**: NEW

#### 2) ShrHWIA_BswSys_ShutdownRequest
- **Ver**: V1.01
- **NO.**: (ê¸°ì¡´ ë§ˆì§€ë§‰ ë²ˆí˜¸ +2)
- **Return Type**: void
- **Element Name**: ShrHWIA_BswSys_ShutdownRequest(void)
- **Safety Note**: "IG ON ì‹œ ë¬´ë™ì‘ (ì•ˆì „ ê³ ë ¤)"
- **Description**: ì•ˆì „í•œ ì‹œìŠ¤í…œ ì¢…ë£Œ ìš”ì²­
- **Result**: NEW

#### 3) ShrHWIA_BswCan_SetTimeoutMax
- **Ver**: V1.01
- **NO.**: (ê¸°ì¡´ ë§ˆì§€ë§‰ ë²ˆí˜¸ +3)
- **Return Type**: void
- **Element Name**: ShrHWIA_BswCan_SetTimeoutMax(uint8 msg_index, uint32 timeout_max)
- **Unit**: ms
- **Description**: CAN ë©”ì‹œì§€ë³„ íƒ€ì„ì•„ì›ƒ ìµœëŒ€ê°’ ì„¤ì • (ë™ì  ë³€ê²½)
- **Result**: NEW

#### 4) ShrHWIA_BswCan_SetCh0CanDisable
- **Ver**: V1.01
- **NO.**: (ê¸°ì¡´ ë§ˆì§€ë§‰ ë²ˆí˜¸ +4)
- **Return Type**: void
- **Element Name**: ShrHWIA_BswCan_SetCh0CanDisable(uint8 disable)
- **1st Parameter**: 0: í™œì„±í™”, 1: ë¹„í™œì„±í™”
- **Description**: CAN CH0 ì†¡ì‹  ì œì–´
- **Result**: NEW

---

## ğŸ“‹ êµ¬ì¡°ì²´/ì‹ í˜¸ ëª…ì„¸ (ê¶Œì¥ ì¶”ê°€ ì‹œíŠ¸)

**ëª©ì **: ì½”ë“œì— ì •ì˜ëœ CAN ë©”ì‹œì§€ ë ˆì´ì•„ì›ƒì„ ëª…ì„¸ë¡œ ë¬¸ì„œí™”

**ìš°ì„  ëŒ€ìƒ (v1.01 ì£¼ìš” ë©”ì‹œì§€ 6ì¢…)**:

### 1) typBswCanMsg_MVPC1
- **ë©”ì‹œì§€ëª…**: typBswCanMsg_MVPC1
- **í¬ê¸°**: 16 bytes, DLC=16  
- **ì£¼ê¸°/ID**: 1ms / 0x20
- **ì£¼ìš” í•„ë“œ**: MVPC_ArsFrntOpMdCmd(8bit), MVPC_ArsReOpMdCmd(8bit), MVPC_ArsAvlChk(8bit), MVPC_ArsAvl(8bit)
- **íƒ€ì„ì•„ì›ƒ**: ê¸°ë³¸ê°’ (SetTimeoutMaxë¡œ ë³€ê²½ ê°€ëŠ¥)

### 2) typBswCanMsg_RT1_10/RT1_20/RT1_200
- **ë©”ì‹œì§€ëª…**: typBswCanMsg_RT1_10/20/200
- **í¬ê¸°**: ê°ê° ì •ì˜ë¨
- **ì£¼ê¸°/ID**: 10ms/0x27, 20ms/0x26, 200ms/0x25
- **ìš©ë„**: ROUTING ê³„ì—´ ë©”ì‹œì§€
- **í•„ë“œ**: ìƒì„¸ëŠ” ì½”ë“œ ì°¸ì¡°

### 3) typBswCanMsg_MEAS
- **ë©”ì‹œì§€ëª…**: typBswCanMsg_MEAS  
- **í¬ê¸°**: 32 bytes, DLC=32
- **ì£¼ê¸°**: 1ms, 5ms, 10ms (ì¸ë±ìŠ¤ë³„)
- **ìš©ë„**: ì¸¡ì • ë°ì´í„° ì†¡ì‹ 

### 4) typBswCanMsg_ARS1
- **ë©”ì‹œì§€ëª…**: typBswCanMsg_ARS1
- **í¬ê¸°**: 16 bytes, DLC=16
- **ì£¼ê¸°**: 1ms
- **ìš©ë„**: ARS ê°œë°œ ë°ì´í„°

---

## âš¡ ì—‘ì…€ ì‘ì—… ê°€ì†í™” íŒ

### ì‹œíŠ¸ êµ¬ì„±
1. **ê¸°ì¡´ V1.00 ì‹œíŠ¸ ë³µì œ** â†’ V1.01 íƒ­ ìƒì„±
2. **ê¸°ì¡´ í–‰ ìœ ì§€**, ìˆ˜ì •/ì¶”ê°€ë§Œ ë°˜ì˜
3. **"Result" ì»¬ëŸ¼ í™œìš©**: NEW/CHG í‘œì‹œ â†’ í•„í„°ë§ìœ¼ë¡œ QA íš¨ìœ¨í™”

### ì…€ ì‘ì—…
- **"NO." ì—°ì†ì„± ìœ ì§€**: ì‹ ê·œëŠ” ê¸°ì¡´ ë§ˆì§€ë§‰ ë²ˆí˜¸ì— ì´ì–´ì„œ
- **ì£¼ê¸°/ID/DLC í†µí•© í‘œê¸°**: 1st Parameter ë˜ëŠ” ë¹„ê³ ì— í•¨ê»˜ ê¸°ì…
- **ë³€ê²½ ì…€ ê°•ì¡°**: ë…¸ë€ìƒ‰ ë°°ê²½ìœ¼ë¡œ ë¦¬ë·° í¬ì¸íŠ¸ ëª…ì‹œ
- **ë³µì‚¬ í™œìš©**: ìœ„ ë¸”ë¡ë“¤ì„ ê·¸ëŒ€ë¡œ ë³µì‚¬í•˜ì—¬ ì‹œê°„ ë‹¨ì¶•

### ê²€ì¦ ì²´í¬
- **í•„í„° í™œìš©**: Result=NEW/CHGë¡œ í•„í„°ë§í•˜ì—¬ ë³€ê²½ì ë§Œ ì§‘ì¤‘ ë¦¬ë·°
- **êµì°¨ ê²€ì¦**: ì•„ë˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ì™€ ëŒ€ì¡°í•˜ì—¬ ëˆ„ë½ ë°©ì§€

---

## âœ… ìµœì¢… ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸ (ì €ì¥ ì „ í•„ìˆ˜)

### BSWâ†’ASW (01 ì‹œíŠ¸)
- [ ] **ADC**: RAW ì ‘ë¯¸ì‚¬, VUC_5V0 ë°˜ì˜ë¨
- [ ] **CAN RX**: MVPC/ROUTING ì¸ë±ìŠ¤ë¡œ êµì²´ë¨
- [ ] **CAN ë“€ì–¼**: CH0/CH1 ëª¨ë‘ í‘œê¸°ë¨
- [ ] **SENT**: SlowChannel ì‹ ê·œ API ì¶”ê°€ë¨
- [ ] **ADC**: CurrentCalibStatus, MotorTempErrStatus ì¶”ê°€ë¨
- [ ] **SYS**: GetCpuLoad, Init3 ì¶”ê°€ë¨

### ASWâ†’BSW (02 ì‹œíŠ¸)
- [ ] **CAN TX**: MEAS ë¼ì¸ì—… 5ì¢… + DLC(32/16) ë°˜ì˜ë¨
- [ ] **SYS**: SetTargetAxle, ShutdownRequest ì¶”ê°€ë¨
- [ ] **CAN ì œì–´**: SetTimeoutMax, SetCh0CanDisable ì¶”ê°€ë¨

### ë¬¸ì„œ ì •ë³´
- [ ] **ë²„ì „**: V1.01ë¡œ ì—…ë°ì´íŠ¸ë¨
- [ ] **ë³€ê²½ì´ë ¥**: ì¶”ê°€ë¨
- [ ] **Result ì»¬ëŸ¼**: NEW/CHG ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë¨

### êµ¬ì¡°ì²´ ëª…ì„¸ (ì„ íƒ)
- [ ] **CAN ë©”ì‹œì§€**: ì£¼ìš” 6ì¢… ë ˆì´ì•„ì›ƒ ê¸°ë¡ë¨

---

## ğŸ“‚ ì°¸ê³  íŒŒì¼ (ì½”ë“œ ê·¼ê±°)

**ADC**: `communication/shared/wia_ars/00_compare_current/Ifc_ASW/inc/BswAdc.h`  
**CAN**: `communication/shared/wia_ars/00_compare_current/Ifc_ASW/inc/BswCan.h`  
**SENT**: `communication/shared/wia_ars/00_compare_current/Ifc_ASW/inc/BswSent.h`  
**SYS**: `communication/shared/wia_ars/00_compare_current/Ifc_ASW/inc/BswSys.h`

**ì´ ê°€ì´ë“œë¥¼ ë”°ë¥´ë©´ ëˆ„ë½ ì—†ì´ ì™„ì „í•œ V1.01 ì—‘ì…€ ëª…ì„¸ì„œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**