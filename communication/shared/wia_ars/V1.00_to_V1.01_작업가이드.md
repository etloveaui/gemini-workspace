# 🔧 ARS Interface V1.00 → V1.01 작업 가이드 (A to Z)

## 📋 **작업 개요**
- **목표**: 기존 V1.00 Excel 파일을 V1.01로 업데이트
- **변경 요약**: 42개 API → 51개 API (9개 추가)
- **작업 시간**: 예상 30-45분

---

## 🎯 **전체 변경 요약**

### 삭제할 API: **0개** (모든 기존 API 유지)
### 수정할 API: **3개**
### 추가할 API: **9개**

---

## 📊 **시트별 작업 지침**

### **Sheet 1: 00_문서정보**

#### 변경 위치: A2셀 (문서명)
```
변경 전: ARS_BSW-ASW_Interface_V1.00
변경 후: ARS_BSW-ASW_Interface_V1.01
```

#### 변경 위치: B2셀 (버전)
```
변경 전: V1.00
변경 후: V1.01
```

#### 변경 위치: C2셀 (작성일)
```
변경 전: 2025-08-18 (또는 기존 날짜)
변경 후: 2025-08-19
```

#### 추가 위치: 마지막 행 다음 (변경 이력)
```
새 행 추가: 변경 이력 | V1.00 → V1.01: API 9개 추가, 3개 수정
```

---

### **Sheet 2: 01_IF_BSW→ASW** (30개 → 35개)

#### 🔧 **수정할 API 3개**

##### **1. API #4: ShrHWIA_BswAdc_GetPhyValue 수정**
**위치**: 4번째 API 행의 1st Parameter 셀

**변경 전**:
```
#define BSWADC_CH_SENS_CURR_U       (0U)
#define BSWADC_CH_SENS_CURR_W      (1U)  
#define BSWADC_CH_SENS_HV             (2U)
#define BSWADC_CH_SENS_CURR_DC    (3U)
#define BSWADC_CH_VUC_3V3              (8U)
```

**변경 후**:
```
#define BSWADC_CH_SENS_CURR_U_RAW	(0U)
#define BSWADC_CH_SENS_CURR_W_RAW	(1U)
#define BSWADC_CH_SENS_CURR_DC_RAW	(2U)
#define BSWADC_CH_SENS_HV			(3U)
#define BSWADC_CH_VUC_5V0			(8U)
```

**변경 이유**: 코드와 문서 동기화

##### **2. API #5: ShrHWIA_BswCan_GetMsg 수정**
**위치**: 5번째 API 행의 1st Parameter 셀

**변경 전**:
```
#define BSWCAN_MSG_RX_INDEX_VPC_ARS_01_10ms		(0U) //Rx // 0x51C
#define BSWCAN_MSG_RX_INDEX_SEA_ARS_01_1ms		(1U) //Rx // 0x51A
#define BSWCAN_MSG_RX_INDEX_SEA_ARS_02_1ms		(2U) //Rx // 0x51B
```

**변경 후**:
```
#define BSWCAN_MSG_RX_INDEX_MVPC_ARS_01_1ms		(0U) //Rx // 0x20
#define BSWCAN_MSG_RX_INDEX_ROUTING_01_10ms		(1U) //Rx // 0x27
#define BSWCAN_MSG_RX_INDEX_ROUTING_01_20ms		(2U) //Rx // 0x26
#define BSWCAN_MSG_RX_INDEX_ROUTING_01_200ms	(3U) //Rx // 0x25
```

**변경 이유**: CAN 메시지 구조 재설계

##### **3. API #6: ShrHWIA_BswCan_GetState_Busoff 수정**
**위치**: 6번째 API 행의 1st Parameter 셀

**변경 전**:
```
#define BSWCAN_CAN_CH0			(0U)
```

**변경 후**:
```
#define BSWCAN_CAN_CH0			(0U)
#define BSWCAN_CAN_CH1			(1U)
```

**변경 이유**: 듀얼 CAN 채널 지원

#### ➕ **추가할 API 5개**

##### **API #31: ShrHWIA_BswAdc_GetCurrentCalibStatus (신규)**
**위치**: 30번째 API 다음 행에 삽입

| 컬럼 | 값 |
|------|-----|
| Ver | V1.01 |
| NO. | 31 |
| Component | BSW → ASW |
| Return Type | uint8 |
| Element Name | ShrHWIA_BswAdc_GetCurrentCalibStatus() |
| Return | 캘리브레이션 상태 |
| Data Range | 0: 진행중, 1: 성공, 2: 실패 |
| Description | 전류 캘리브레이션 상태 |
| Note | 전류 센서 진단 강화 |
| Result | NEW |

##### **API #32: ShrHWIA_BswAdc_GetMotorTempErrStatus (신규)**
| 컬럼 | 값 |
|------|-----|
| Ver | V1.01 |
| NO. | 32 |
| Return Type | uint8 |
| Element Name | ShrHWIA_BswAdc_GetMotorTempErrStatus() |
| Return | 에러 상태 |
| Data Range | 0: 정상, 1: 에러 |
| Description | 모터 온도 센서 에러 상태 |
| Result | NEW |

##### **API #33: ShrHWIA_BswSent_GetSlowChannel (신규)**
| 컬럼 | 값 |
|------|-----|
| Ver | V1.01 |
| NO. | 33 |
| Return Type | uint8 |
| Element Name | ShrHWIA_BswSent_GetSlowChannel(uint8 msgId, uint8* data, uint32* timestamp) |
| 1st Parameter | 22개 ID 지원 |
| 2nd Parameter | data |
| 3rd Parameter | timestamp |
| Return | 상태값 |
| Data Range | 0: 성공, 1: 실패 |
| Description | SENT Slow Channel 데이터 |
| Note | 22개 ID 지원으로 확장 |
| Result | NEW |

##### **API #34: ShrHWIA_BswSys_GetCpuLoad (신규)**
| 컬럼 | 값 |
|------|-----|
| Ver | V1.01 |
| NO. | 34 |
| Return Type | float |
| Element Name | ShrHWIA_BswSys_GetCpuLoad() |
| Return | CPU 사용률 |
| Data Range | 0.0~100.0 |
| Unit | % |
| Description | CPU 사용률 측정 |
| Note | 시스템 성능 모니터링 |
| Result | NEW |

##### **API #35: ShrHWIA_IswHandler_Init3 (신규)**
| 컬럼 | 값 |
|------|-----|
| Ver | V1.01 |
| NO. | 35 |
| Task | Init |
| Return Type | void |
| Element Name | ShrHWIA_IswHandler_Init3() |
| Description | 3차 초기화 함수 |
| Note | 고급 기능 활성화 |
| Result | NEW |

---

### **Sheet 3: 02_IF_ASW→BSW** (12개 → 16개)

#### 🔧 **수정할 API 1개**

##### **API #1: ShrHWIA_BswCan_SetMsg 수정**
**위치**: 1번째 API 행의 1st Parameter 셀

**변경 전**:
```
#define BSWCAN_MSG_TX_INDEX_ARS_dev_01_10ms		(0U) //Tx // 0x514
#define BSWCAN_MSG_TX_INDEX_ARS_dev_02_1ms		(1U) //Tx // 0x515
```

**변경 후**:
```
#define BSWCAN_MSG_TX_INDEX_MEAS_01_1ms			(0U) //Tx 0x401
#define BSWCAN_MSG_TX_INDEX_MEAS_01_5ms			(1U) //Tx 0x402
#define BSWCAN_MSG_TX_INDEX_MEAS_02_5ms			(2U) //Tx 0x403
#define BSWCAN_MSG_TX_INDEX_MEAS_01_10ms		(3U) //Tx 0x404
#define BSWCAN_MSG_TX_INDEX_MEAS_02_10ms		(4U) //Tx 0x405
#define BSWCAN_MSG_TX_INDEX_ARS_dev_01_1ms		(5U) //Tx Front: 0x21, Rear: 0x22
```

**변경 이유**: 측정 데이터 전송 채널 확장

#### ➕ **추가할 API 4개**

##### **API #13: ShrHWIA_BswSys_SetTargetAxle (신규)**
**위치**: 12번째 API 다음 행에 삽입

| 컬럼 | 값 |
|------|-----|
| Ver | V1.01 |
| NO. | 13 |
| Task | Init |
| Return Type | uint8 |
| Element Name | ShrHWIA_BswSys_SetTargetAxle(uint8 axle_type) |
| 1st Parameter | #define BSWSYS_AXLE_UNDEFINED (0U)<br>#define BSWSYS_AXLE_FRONT (1U)<br>#define BSWSYS_AXLE_REAR (2U) |
| Return | 상태값 |
| Data Range | 0: 설정 성공, 1: 설정 실패 |
| Description | 타겟 액슬 설정 |
| Note | 시스템 구성 제어 |
| Result | NEW |

##### **API #14: ShrHWIA_BswSys_ShutdownRequest (신규)**
| 컬럼 | 값 |
|------|-----|
| Ver | V1.01 |
| NO. | 14 |
| Return Type | uint8 |
| Element Name | ShrHWIA_BswSys_ShutdownRequest() |
| Return | 상태값 |
| Data Range | 0: 요청 성공, 1: 요청 거부 |
| Description | 시스템 셧다운 요청 |
| Note | 안전한 시스템 종료 (IG ON시 무동작) |
| Result | NEW |

##### **API #15: ShrHWIA_BswCan_SetTimeoutMax (신규)**
| 컬럼 | 값 |
|------|-----|
| Ver | V1.01 |
| NO. | 15 |
| Return Type | uint8 |
| Element Name | ShrHWIA_BswCan_SetTimeoutMax(uint8 msg_index, uint16 timeout_max) |
| 1st Parameter | msg_index |
| 2nd Parameter | timeout_max |
| Return | 상태값 |
| Data Range | 0: 설정 성공, 1: 설정 실패 |
| Unit | ms |
| Description | CAN 타임아웃 동적 설정 |
| Note | 메시지별 타임아웃 제어 |
| Result | NEW |

##### **API #16: ShrHWIA_BswCan_SetCh0CanDisable (신규)**
| 컬럼 | 값 |
|------|-----|
| Ver | V1.01 |
| NO. | 16 |
| Return Type | uint8 |
| Element Name | ShrHWIA_BswCan_SetCh0CanDisable(uint8 disable) |
| 1st Parameter | disable |
| Return | 상태값 |
| Data Range | 0: 활성화, 1: 비활성화 |
| Description | CAN CH0 송신 제어 |
| Note | 채널별 CAN 제어 |
| Result | NEW |

---

## ⚡ **빠른 작업 순서**

### 1단계: 문서정보 시트 (30초)
1. A2: V1.00 → V1.01
2. B2: V1.00 → V1.01  
3. C2: 날짜 업데이트
4. 마지막 행: 변경 이력 추가

### 2단계: BSW→ASW 시트 (15분)
1. **기존 3개 API 수정** (API #4, #5, #6)
2. **신규 5개 API 추가** (API #31~#35)

### 3단계: ASW→BSW 시트 (10분)
1. **기존 1개 API 수정** (API #1)
2. **신규 4개 API 추가** (API #13~#16)

### 4단계: 검토 및 저장 (5분)
1. 전체 API 개수 확인: 51개
2. NEW 마크 확인: 9개
3. 파일 저장: V1.01 버전

---

## ✅ **검증 체크리스트**

### 완료 확인 항목
- [ ] 문서명 V1.01로 변경
- [ ] 버전 정보 V1.01로 변경
- [ ] 작성일 2025-08-19로 변경
- [ ] 변경 이력 추가
- [ ] BSW→ASW: 30개 → 35개 확인
- [ ] ASW→BSW: 12개 → 16개 확인
- [ ] 수정 API 3개 올바르게 변경
- [ ] 신규 API 9개 모두 추가
- [ ] Result 컬럼에 NEW 마크 9개
- [ ] 총 API 개수 51개 확인

### 품질 확인
- [ ] 매크로 정의 문법 정확성
- [ ] 파라미터 순서 정확성
- [ ] 반환값 범위 명시
- [ ] 설명 완전성
- [ ] 인코딩 문제 없음 (한글 정상 표시)

---

## 🚨 **주의사항**

### 실수하기 쉬운 부분
1. **ADC 채널**: CURR_U → CURR_U_RAW (RAW 추가)
2. **VUC 전압**: 3V3 → 5V0 (전압 변경)
3. **CAN 인덱스**: 완전히 새로운 구조로 교체
4. **SENT 파라미터**: 3개 파라미터 모두 정확히 기입
5. **Ver 컬럼**: 신규 API는 반드시 V1.01
6. **Result 컬럼**: 신규 API는 반드시 NEW

### 품질 보장
- 복사-붙여넣기 시 서식 깨짐 주의
- 매크로 정의의 탭/스페이스 일관성 유지
- 한글 깨짐 방지를 위해 UTF-8 BOM 인코딩 사용

---

**🎯 이 가이드대로 작업하면 30-45분 내에 정확한 V1.01 문서 완성 가능합니다!**