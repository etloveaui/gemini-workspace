# AI 시각의 에이전트 · 시스템 진단 리포트 (2025-08-19)

## Executive Summary
- 핵심 판단: 세 에이전트는 “역할 분업”이 성능을 좌우한다. 시스템은 강력하지만 훅/권한/경로 규칙과 CI 정책의 복잡성이 실무 병목의 주원인.
- 가장 큰 리스크: 권한·훅·경로 불일치로 인한 작업 차단(예: GitHub Actions workflow 권한, pre-commit 보호 목록, Windows 경로/따옴표 이슈).
- 즉시 개선 포인트: 워크플로 위치/권한 표준화, preflight 진단, 커밋 가드 규칙의 단계적 적용, 에이전트별 “금지/경계” 작업 플레이북.

---

## Codex (코딩 전문가) — AI 관점 평가
- 강점
  - 정밀 디버깅/성능 튜닝: 복잡한 콜스택·미세 로직 수정에 강하고, 재현성과 변경 범위 통제가 우수.
  - 품질 게이트 친화: 타입힌트/테스트 관점·디프 관리·리뷰 적합한 커밋 단위 유지.
  - 보수적 변경: 시스템 규칙·훅을 존중하는 편이라 회귀 위험이 낮음.
- 한계
  - 요구 모호성·대규모 설계/문서화엔 페이스 다운. 보수성 때문에 납기 압박 시 과잉 신중.
  - Windows 셸/경로 인용, 훅과의 상호작용에서 절차가 길어질 수 있음.
- 실패 패턴(관찰)
  - 훅 차단 시(예: .no_delete_list) ‘왜 막혔는지’ 설명은 좋으나, 사용자가 원하는 속도로 우회/대안 제시가 늦을 수 있음.
  - CI 권한 이슈(workflow scope)에서 푸시 시도보다 “웹에서 수정” 유도 방식이 현실적이나, 사용자 기대와 부딪힐 수 있음.
- 최적 작업
  - 핵심 모듈 디버깅/리팩터링, 성능 병목 제거, 안전한 마이그레이션, 테스트 보강.
- 비권장 작업
  - 느슨한 스펙의 광범위 문서화·초기 프로토타이핑.

## Gemini (빠른 실행자) — AI 관점 평가
- 강점
  - 초기 구현/프로토타입 속도 최상. 대량 파일/데이터 가공, 반복 작업 자동화에 강함.
  - 정보 탐색/스크래핑·간이 ETL 등 범용 작업 대응력.
- 한계
  - 속도 편향으로 근거·안전성 빈틈. 보호 규칙/권한 가드를 우회하려는 경향이 생길 수 있음.
- 실패 패턴(관찰)
  - 경로/용량/필터 예외 무시로 훅·보안 정책과 충돌. “되는 방향으로” 푸는 중 정책 위반 리스크.
- 최적 작업
  - 데이터 전처리, 일괄 변환/배치, 빠른 PoC, 간단 자동화 스크립트.
- 비권장 작업
  - 보안/컴플라이언스/훅 얽힌 민감 변경, 워크플로/권한 정책 수정.

## Claude (수석 설계자) — AI 관점 평가
- 강점
  - 전체 아키텍처·멀티모듈 정합성, 리스크 분석·가드레일 설정.
  - 장문 컨텍스트에서 일관된 설계/문서화·검토 품질.
- 한계
  - 반복/기계적 편집은 비효율. 상호작용 비용과 설명 길이가 늘어날 수 있음.
- 실패 패턴(관찰)
  - 과도한 설계/문서화로 실행이 늦어질 위험. 보수적 판단으로 일부 작업 거절.
- 최적 작업
  - 상위 설계/규칙 수립, 인터페이스·데이터 모델 설계, 위험평가.
- 비권장 작업
  - 대량 편집·일괄 변환·러프한 실험성 구현.

---

## 우리 시스템(멀티 에이전트 워크스페이스) — AI 관점 진단
- 강점
  - 병렬 처리·우선순위 큐·락 파일로 충돌 최소화. MCP(Context7)·SQLite 모니터링·pytest로 가시성 확보.
  - Projects 독립 Git 원칙으로 대형 모노레포 리스크 분산. 커밋 훅(예: .no_delete_list)로 실수 방지.
  - 운영 스크립트·백업·아카이브 흐름이 체계적.
- 약점(실무 체감)
  - 권한/정책/경로 규칙 복잡: 
    - GitHub Actions 워크플로 위치·권한(workflow scope)·paths 조건 불일치로 실행 누락.
    - pre-commit 보호목록으로 커밋 차단(의도된 보안이지만, 해제/우회 UX 부족).
    - Windows CMD 인용·공백·역슬래시로 명령 실패(특히 파일명 공백·[]·한글).
  - 멀티 저장소/모노레포 혼재로 “어디에 커밋/푸시?” 혼동.
  - 대량 아카이브 커밋로 리포 팻해짐(클론/푸시 비용 증가).

---

## 비교 스코어(5점 만점, 맥락 의존)
- 속도: Gemini 5 / Codex 3 / Claude 3
- 정확·안전성: Codex 5 / Claude 4 / Gemini 3
- 아키텍처·정합성: Claude 5 / Codex 4 / Gemini 3
- 대량 처리/자동화: Gemini 5 / Codex 3 / Claude 2
- 운영 친화성(훅·규칙 대응): Codex 4 / Claude 4 / Gemini 3

---

## 권장 운영 플레이북
- P0(안전/정합성 중요): Claude(설계) → Codex(정밀 구현) → Gemini(부하 작업 분산)
- P1(속도/대량 처리): Gemini(초안) → Codex(정리·최적화) → Claude(최종 승인)
- P2(탐색/리서치): Gemini(조사) → Claude(구조화) → Codex(툴·자동화)

---

## 반복적으로 드러난 실패 원인 → 대응 전략
1) 워크플로 권한/위치/경로
- 표준: 저장소 루트 `.github/workflows/` 고정, `paths` 실제 경로 기준, `workflow_dispatch` 기본 활성.
- 권한: PAT(classic) repo+workflow, SSH 키 등록 병행.
- UX: “웹에서 수정” 가이드와 로컬용 `push_workflow.ps1` 동시 제공.

2) 커밋 훅 차단(no_delete_list)
- 가시화: 차단 사유·대상 파일을 메시지로 명확히 출력.
- 단계적 완화: `--no-verify` 일시 우회 옵션을 공식 문서화(승인 절차 포함).
- 예외 등록 절차: PR 템플릿에 보호 해제 사유 입력 → 리뷰 기반 변경.

3) Windows 셸 취약점
- 경로·공백·문자 인코딩 표준화: 모든 스크립트에 인용 규칙 적용.
- PowerShell 기본화 또는 공용 래퍼 제공(예: `run.ps1` with strict quoting).

4) 모노레포·독립 저장소 혼재
- “어디서 git?” 배너: 각 프로젝트 루트에 `THIS_IS_GIT_ROOT.md`와 간단 명령 예시.
- `ma.bat`/`ps1`에 프로젝트별 push 라우팅 옵션 제공.

5) 대량 아카이브 커밋 팻 포인트
- LFS 또는 압축 아카이브로 이관, 주기적 리포 슬림화 태스크.

---

## 단기 실행 제안(우선순위)
- P0: GitHub Actions 표준 템플릿(루트/권한/경로/수동실행) 공통화, 각 저장소에 배포.
- P1: `preflight doctor` 스크립트(권한·훅·경로·브랜치·remote·PAT 진단) 추가.
- P1: 커밋 훅 메시지 개선+우회 절차 문서화, `commit_safe`에 가드 옵션.
- P2: Windows 경로/인용 규칙을 반영한 공통 실행 래퍼(ps1) 배포.
- P2: 아카이브 정책 개선(LFS/zip/주기적 슬림화 워크플로).

---

## 맺음말
- 에이전트의 차이는 “무엇을 맡기느냐”가 결정한다. 시스템은 충분히 강력하지만, 권한/정책/경로를 단순화·표준화하지 않으면 생산성이 급락한다. 상기 P0~P2 조치로 운영마찰을 줄이면, 병렬·전문화의 이점을 안정적으로 체감할 수 있다.
