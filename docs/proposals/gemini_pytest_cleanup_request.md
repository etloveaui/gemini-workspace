# Gemini CLI pytest 실패 테스트 정리 지시서

**작성자**: Claude  
**작성일**: 2025-08-18  
**대상**: Gemini CLI  
**우선순위**: 중요 (P1)

## 📋 테스트 정리 요청 개요

현재 17개의 pytest 테스트가 실패하고 2개의 오류가 발생하고 있어 안정적인 작업 진행에 장애가 되고 있습니다. 이를 체계적으로 정리해주세요.

## 🔍 구체적 조사 및 정리 항목

### 1. 실패 테스트 현황 파악 📊
- **조사 대상**:
  - [ ] `pytest -v` 실행하여 전체 실패 목록 확인
  - [ ] 각 실패 테스트의 오류 메시지 분석
  - [ ] 실패 원인별 분류 (파일 없음, 의존성 문제, 코드 변경 등)
  - [ ] 2개 오류의 구체적 내용 파악

### 2. 삭제된/존재하지 않는 파일 관련 테스트 🗂️
- **문제**: 이미 지워진 파일이나 존재하지 않는 테스트 참조
- **조사 항목**:
  - [ ] 테스트에서 참조하는 파일들의 실제 존재 여부 확인
  - [ ] `conftest.py`, `pytest.ini` 등 설정 파일 상태 점검
  - [ ] 테스트 데이터 파일들의 위치 및 상태 확인
  - [ ] 임시 테스트 파일들이 남아있는지 확인

### 3. 의존성 및 환경 문제 🔧
- **조사 대상**:
  - [ ] 필요한 Python 패키지가 설치되어 있는지 확인
  - [ ] 테스트 환경 변수 설정 상태
  - [ ] 가상환경 활성화 상태 및 경로 문제
  - [ ] Windows 환경 특화 이슈들

### 4. 코드 변경으로 인한 테스트 불일치 🔄
- **조사 항목**:
  - [ ] 최근 코드 변경사항과 테스트 코드 간 불일치
  - [ ] API 변경으로 인한 테스트 시그니처 문제
  - [ ] import 경로 변경으로 인한 모듈 로딩 실패

## 🛠️ 권장 정리 방법

### 1단계: 현황 파악
```bash
# 상세한 실패 정보 수집
pytest -v --tb=short > test_failures.log 2>&1

# 누락된 파일들 찾기
pytest --collect-only 2>&1 | grep -i "no such file\|not found"

# 패키지 의존성 확인
pip list | grep -E "(pytest|test)"
```

### 2단계: 카테고리별 분류
각 실패 테스트를 다음 카테고리로 분류:
- **A그룹**: 쉽게 수정 가능 (파일 경로, import 문제)
- **B그룹**: 코드 변경 필요 (API 변경 반영)
- **C그룹**: 삭제 고려 대상 (더 이상 불필요한 테스트)
- **D그룹**: 추가 조사 필요 (복잡한 문제)

### 3단계: 우선순위 수정
1. **A그룹 우선 처리** - 즉시 수정 가능
2. **C그룹 정리** - 불필요한 테스트 제거
3. **B그룹 계획 수립** - 코드 수정 필요한 항목들
4. **D그룹 분석** - 복잡한 문제들 심화 조사

## 📊 결과 보고 형식

```markdown
# pytest 테스트 정리 보고서

## 실패 테스트 현황 분석
### 총 17개 실패 테스트 분류
- **A그룹 (즉시 수정 가능)**: X개
- **B그룹 (코드 변경 필요)**: X개  
- **C그룹 (삭제 고려)**: X개
- **D그룹 (추가 조사 필요)**: X개

### 2개 오류 상세 분석
1. 오류 1: [구체적 오류 내용 및 원인]
2. 오류 2: [구체적 오류 내용 및 원인]

## 즉시 적용 가능한 수정사항
### A그룹 테스트 수정 계획
1. [테스트명]: [수정 방법]
2. [테스트명]: [수정 방법]

### C그룹 삭제 대상 테스트
1. [테스트명]: [삭제 사유]
2. [테스트명]: [삭제 사유]

## 추가 작업 필요 항목
### B그룹 - 코드 변경 필요
1. [테스트명]: [필요한 코드 변경사항]

### D그룹 - 추가 조사 필요  
1. [테스트명]: [조사가 필요한 이유]

## 권장 해결 순서
1. **즉시 실행**: A그룹 수정 및 C그룹 삭제
2. **단기 계획**: B그룹 코드 변경 계획 수립
3. **중기 계획**: D그룹 심화 분석

## 다음 단계
- Claude에게 전달할 구체적 수정 스크립트
- 테스트 환경 개선 방안
- 향후 테스트 실패 방지 대책
```

## ⏰ 예상 소요 시간
약 30-40분 내외로 분석 및 분류 완료 예상

## 📝 특별 요청사항

1. **실용적 접근**: 100% 완벽보다는 80%의 안정성을 빠르게 확보
2. **문서화**: 수정 과정과 삭제된 테스트 목록을 명확히 기록
3. **자동화 제안**: 향후 이런 문제를 방지할 수 있는 자동화 방안도 포함
4. **Windows 호환성**: Windows 환경에서 안정적으로 작동하는 해결책

## 🎯 성공 기준

- [ ] 17개 실패 테스트 중 최소 12개 이상 해결
- [ ] 2개 오류 완전 해결
- [ ] `pytest` 실행 시 치명적 오류 없음
- [ ] 핵심 기능 테스트들이 정상 통과
- [ ] 테스트 실행 시간이 합리적 범위 내

## 🔄 지속적 개선

테스트 정리 후 다음 사항도 고려해주세요:
- 테스트 코드 품질 개선 방안
- CI/CD 파이프라인에서의 테스트 자동화
- 개발 워크플로우에서 테스트 실패 방지 체크포인트

---
**이 지시서는 Claude Code에 의해 생성되었습니다.**