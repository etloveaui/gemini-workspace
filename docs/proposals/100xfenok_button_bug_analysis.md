# 100xFenok 플로팅 버튼 문제 분석 보고서

**작성자**: Gemini
**작성일**: 2025-08-18
**분석 목표**: `100xFenok` 프로젝트의 플로팅 버튼이 특정 화면 너비에서 사라지는 현상의 원인을 분석하고, 근본적인 해결 방안을 제시합니다.

## 1. 문제 현상 요약

-   **정상 동작**: 모바일 화면 등 대부분의 환경에서는 우측 하단에 플로팅 버튼이 정상적으로 표시됩니다. (`normal.jpg` 참조)
-   **오류 현상**: 특정 화면 너비(breakpoint 근방으로 추정)에서 플로팅 버튼이 화면에서 사라지는 문제가 발생합니다. (`abnormal.jpg` 참조)

## 2. 근본 원인 분석

문제의 핵심 원인은 **CSS와 JavaScript 간의 스타일 제어 충돌**입니다.

1.  **과도한 CSS 미디어 쿼리**: `nav.css` 파일 하단에는 "플로팅 버튼 글리치 수정"이라는 목적으로 특정 화면 너비(주로 590px ~ 720px)에만 적용되는 복잡한 미디어 쿼리들이 다수 존재합니다. 이 규칙들은 `!important` 키워드를 사용하여 다른 스타일을 강제로 덮어쓰고 있어, 예측 불가능한 동작의 원인이 됩니다.

2.  **JavaScript의 동적 스타일 제어**: `nav.html` 내의 `<script>` 태그에 포함된 `correctFloatingMenuPosition()` 함수 역시 화면 너비를 감지하여 플로팅 버튼의 스타일(위치, z-index, 투명도 등)을 동적으로 변경합니다.

3.  **제어 주체 충돌**: 결과적으로, 특정 화면 너비 구간에서 **CSS 미디어 쿼리**와 **JavaScript 함수**라는 두 개의 주체가 서로 다른 스타일(특히 `visibility`, `opacity`, `position` 등)을 동시에, 그리고 강제적으로 적용하려고 시도합니다. 이 충돌로 인해 브라우저는 최종적으로 버튼을 화면에 렌더링하지 않거나, 화면 밖으로 밀어내는 등의 비정상적인 동작을 하게 됩니다.

특히, `contain: layout style !important;` 와 같은 고도의 최적화 속성을 `!important`와 함께 사용하는 것은 브라우저의 렌더링 방식을 예기치 않게 변경하여 문제를 더욱 복잡하게 만들었을 가능성이 큽니다.

## 3. 권장 해결 방안

이 문제를 근본적으로 해결하기 위해서는, **스타일 제어의 주체를 하나로 통일**하여 코드의 복잡성을 낮추고 예측 가능성을 높여야 합니다. JavaScript가 이미 동적인 화면 크기 변화에 대응하고 있으므로, **JavaScript에게 반응형 제어를 모두 위임**하는 것이 가장 바람직합니다.

1.  **CSS 단순화 (충돌 제거)**:
    -   `nav.css` 파일 하단의 `/* ======================================== 플로팅 버튼 글리치 수정 (2025-08-17) ======================================== */` 섹션 전체를 **제거**합니다.
    -   이를 통해 CSS는 플로팅 버튼의 기본 모양과 상태(예: `active` 클래스)만 정의하고, 위치나 가시성에 대한 복잡한 반응형 규칙은 모두 제거합니다.

2.  **JavaScript 로직 강화 (제어 일원화)**:
    -   `nav.html`의 `correctFloatingMenuPosition()` 함수를 수정하여, 기존에 CSS 미디어 쿼리가 담당했던 모든 예외 처리(예: 590px-720px 구간에서의 위치 보정)를 포함하도록 로직을 강화합니다.
    -   JavaScript 내에서 스타일을 직접 주입하기보다는, `is-problem-zone`과 같은 클래스를 동적으로 추가/제거하고, 해당 클래스에 대한 스타일을 CSS에 미리 정의하는 방식으로 코드를 개선하는 것을 권장합니다.
    -   `!important` 키워드 사용을 최대한 배제하여 스타일 우선순위 충돌을 피합니다.

## 4. 다음 단계

-   개발자는 위 해결 방안에 따라 `nav.css`와 `nav.html` 파일을 수정해야 합니다.
-   수정 후, 다양한 디바이스와 브라우저에서 화면 너비를 조절하며 플로팅 버튼이 모든 구간에서 일관되게 동작하는지 충분히 테스트해야 합니다.

이 보고서가 문제의 원인을 명확히 파악하고, 안정적인 해결책을 구현하는 데 도움이 되기를 바랍니다.
