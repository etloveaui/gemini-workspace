# Gemini 행동 지침 (gemini-workspace)

이 문서는 Gemini가 이 워크스페이스에서 작업을 수행할 때 따라야 할 최우선 규칙과 절차를 정의합니다.

---

## I. 핵심 운영 환경 (Core Operating Environment)

**1. 사용자 환경: Windows**
- **주 운영체제:** 이 워크스페이스의 주 운영체제는 **Windows** 입니다.
- **절대 준수:** 모든 파일 경로, 셸 명령어, 환경 변수 등은 Windows 표준을 따라야 합니다.

**2. Gemini의 실행 환경과 주의점**
- **환경 차이:** Gemini의 도구(Tool) 실행 환경은 Linux 기반일 수 있습니다. 이로 인해 Windows 명령어(`del`, `copy`) 대신 Linux 명령어(`rm`, `cp`)를 사용하려는 실수가 발생할 수 있습니다.
- **핵심 행동 규칙:** 모든 명령어 실행 전, **사용자 환경이 Windows임을 반드시 인지**하고 Windows에 맞는 명령어를 사용해야 합니다. 실패 시 OS 환경 차이를 가장 먼저 의심하고 수정합니다.

**3. 작업 공간 제한**
- **절대 원칙:** 모든 파일 작업은 `%USERPROFILE%\gemini-workspace` 디렉터리 안에서만 수행해야 합니다. 이 디렉터리 외부의 어떤 파일 시스템 경로에도 접근하거나 파일을 생성해서는 안 됩니다.

**4. 사용 언어**
- **기본 언어:** 사용자와의 모든 상호작용은 **한국어**로 진행하는 것을 원칙으로 합니다.

---

## II. 표준 작업 절차 (Standard Workflows)

**1. 세션 시작**
- 모든 대화 세션을 시작할 때, 이 `GEMINI.md` 파일을 가장 먼저 읽고 모든 규칙을 인지한 상태에서 작업을 시작해야 합니다.

**2. `.gitignore` 관리**
- **작업 시작 시:** 프로젝트 관련 작업을 시작할 때, 루트 `.gitignore` 파일에서 `/projects/` 라인을 찾아 주석 처리(`#/projects/`)합니다.
- **작업 종료 시:** 작업 완료 또는 커밋 시, 다시 `/projects/` 라인의 주석을 제거하여 복원합니다.
- **이유:** `projects` 폴더 내 각 프로젝트는 별도 Git 저장소로 관리됩니다.

**3. 민감 정보 처리**
- **핵심 파일:** `secrets/my_sensitive_data.md` (Git 추적 제외)
- **절차:**
    1. 새로운 민감 정보 발견/생성 시, 즉시 `secrets/my_sensitive_data.md` 파일에 명확한 형식으로 기록합니다.
    2. 기록 후, 사용자에게 **"새로운 [정보 종류] 정보를 `secrets/my_sensitive_data.md` 파일에 기록했습니다. 내용을 확인하고 안전하게 관리해 주세요."** 라고 즉시 알립니다.
    3. **경고:** 민감 정보 자체를 대화창에 절대 노출해서는 안 됩니다.

**4. Git 커밋 (Windows 환경)**
- **문제:** `git commit -m "메시지"` 명령어의 문자열 처리 문제.
- **우회 절차:**
    1. `COMMIT_MSG.tmp` 임시 파일에 커밋 메시지를 작성합니다.
    2. `git commit -F COMMIT_MSG.tmp` 명령어로 커밋합니다.
    3. 성공 시, `del COMMIT_MSG.tmp` 명령어로 임시 파일을 즉시 삭제합니다.

---

## III. 주요 문제 해결 (Troubleshooting)

**1. `.gitignore`와 파일 접근 불가**
- **문제:** `.gitignore` 설정으로 인해 특정 파일이 보이지 않거나 접근이 안 될 수 있습니다.
- **해결책:** 파일이 존재해야 하는데 없다고 판단될 경우, **`respect_git_ignore=False`** 옵션을 사용하여 다시 파일 읽기를 시도합니다.

---

## IV. 지능형 작업 기록 시스템 (Intelligent Logging System)

**1. 목적**
- 컨텍스트 손실 없는 완벽한 작업 인계 및 재개를 위함.
- Gemini가 능동적으로 기록을 관리하여 사용자의 부담을 제로(Zero)로 만듦.

**2. 핵심 파일**
- **`docs/HUB.md`:** 모든 작업의 중앙 관제 허브.
- **`docs/tasks/[task_id]/log.md`:** 개별 작업의 상세 타임라인.

**3. 기록 주기 설정 (Logging Cycle Configuration) - ★★★★★**
- **현재 설정: `Standard`**
- Gemini는 아래 설정에 따라 기록 시점을 조절한다. 사용자가 "사이클이 너무 길어/짧아"라고 피드백하면 이 설정을 변경한다.
    - `Detailed`: 파일 수정, 명령어 실행 등 **거의 모든 유의미한 행동 후** 기록을 제안.
    - `Standard` (기본값): 테스트 통과, 기능 구현 완료, 주요 문제 해결 등 **중요한 작업 단위(체크포인트)가 끝났을 때** 기록을 제안.
    - `Minimal`: 사용자가 명시적으로 "기록해줘"라고 하거나, 세션을 종료할 때만 기록.

**4. Gemini 기록 사이클 (Gemini Logging Cycle) - 강제 규칙**

**A. 세션 시작 시:**
1.  **무조건 `docs/HUB.md` 파일을 읽는다.**
2.  HUB의 `Active/Paused Tasks` 목록을 사용자에게 보여주며 작업을 선택하게 한다.
    > "현재 진행 중인 작업은 다음과 같습니다: [작업 목록]. 어떤 작업을 계속할까요? 아니면 새로운 작업을 시작할까요?"

**B. 작업 진행 중 (체크포인트 도달 시):**
1.  현재 설정된 **기록 주기에 따라** 체크포인트 도달을 인지한다.
2.  수행한 작업 로그를 생성하여 **먼저 제안하고, 동의를 구한다.**
    > "작업이 완료되었습니다. 다음과 같이 로그에 기록할까요? (Y/N/Edit)"
3.  사용자 피드백을 반영하여 `log.md`에 기록한다. 사용자가 거부하면 기록하지 않되, 다음 체크포인트에서 다시 제안한다.

**C. 세션 종료 시:**
1.  사용자가 대화를 끝내려 할 때, 현재 작업 상태를 `HUB.md`에 업데이트할지 묻고, 컨텍스트를 완벽하게 보존한다.
